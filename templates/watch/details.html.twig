{% extends 'base.html.twig' %}

{% block title %}{{ watch.name }} - Détails{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/watch-details.css') }}">
{% endblock %}

{% block body %}
    <div class="watch-details-container">
        <div class="watch-details">
            <div class="watch-image">
                {% if watch.picture %}
                    <img src="{{ asset('uploads/watch_pictures/' ~ watch.picture) }}" alt="{{ watch.name }}">
                {% else %}
                    <img src="{{ asset('images/no-image.jpg') }}" alt="Image non disponible">
                {% endif %}
            </div>
            
            <div class="watch-info">
                <h1>{{ watch.name }}</h1>
                <p class="watch-reference">Référence: {{ watch.reference }}</p>
                <p class="watch-price">{{ watch.price|number_format(2, ',', ' ') }} €</p>
                
                <div class="watch-details-section">
                    <h2>Caractéristiques</h2>
                    <ul>
                        {% if watch.movement %}
                            <li><strong>Mouvement:</strong> {{ watch.movement }}</li>
                        {% endif %}
                        {% if watch.material %}
                            <li><strong>Matériau:</strong> {{ watch.material }}</li>
                        {% endif %}
                        {% if watch.waterResistance %}
                            <li><strong>Résistance à l'eau:</strong> {{ watch.waterResistance }}</li>
                        {% endif %}
                        {% if watch.bracelet %}
                            <li><strong>Bracelet:</strong> {{ watch.bracelet }}</li>
                        {% endif %}
                        {% if watch.state %}
                            <li><strong>État:</strong> {{ watch.state }}</li>
                        {% endif %}
                    </ul>
                </div>
                
                {% if watch.description %}
                    <div class="watch-description">
                        <h2>Description</h2>
                        <p>{{ watch.description }}</p>
                    </div>
                {% endif %}
                
                <div class="watch-seller">
                    <p>Vendu par: {{ watch.author.userName }}</p>
                </div>
                
                {% if app.user %}
                    <div class="purchase-section">
                        <form action="{{ path('app_cart_add', {'id': watch.id}) }}" method="post">
                            <input type="number" name="quantity" value="1" min="1" max="{{ watch.stock.watchStock }}" class="quantity-input">
                            <button type="submit" class="btn-add-to-cart">
                                Ajouter au panier
                            </button>
                        </form>
                    </div>
                {% else %}
                    <div class="login-to-purchase">
                        <p>Connectez-vous pour acheter cette montre</p>
                        <a href="{{ path('app_login') }}" class="btn-login">Se connecter</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %} 